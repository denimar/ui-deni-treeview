"use strict";!function(){angular.module("uiDeniTreeview",[])}(),function(){function e(e){e.put("ui-deni-treeview.view.html",'<div class="ui-deni-treeview-container" ng-class="ctrl.theme">\n  <div>\n    <ui-deni-treeview-item theme="{{ctrl.theme}}" item="ctrl.rootItem" level=0 ng-if="ctrl.showRoot"></ui-deni-treeview-item>\n    <div ng-repeat="item1 in ctrl.rootItem.children">\n      <ui-deni-treeview-item theme="{{ctrl.theme}}" parent="ctrl.rootItem" item="item1" level=1></ui-deni-treeview-item>\n      <div class="ng-hide" ng-repeat="item2 in item1.children" ng-show="item1.expanded">\n        <ui-deni-treeview-item theme="{{ctrl.theme}}" parent="item1" item="item2" level=2></ui-deni-treeview-item>\n        <div class="ng-hide" ng-repeat="item3 in item2.children" ng-show="item2.expanded">\n          <ui-deni-treeview-item theme="{{ctrl.theme}}" parent="item2" item="item3" level=3></ui-deni-treeview-item>\n          <div class="ng-hide" ng-repeat="item4 in item3.children" ng-show="item3.expanded">\n            <ui-deni-treeview-item theme="{{ctrl.theme}}" parent="item3" item="item4" level=4></ui-deni-treeview-item>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>')}angular.module("uiDeniTreeview").run(e),e.$inject=["$templateCache"]}(),function(){function e(e){e.put("ui-deni-treeview-item.view.html",'<div class="ui-deni-treeview-item-container ng-hide"  ng-show="!ctrl.item.hidden" ng-class="ctrl.getNgClassItem($parent.ctrl, ctrl)" ng-mousedown="ctrl.itemMousedown($parent.ctrl, this, ctrl.item)">\n  <div class="expand-button" ng-click="ctrl.expandButtonClick(this, ctrl.item)" ng-class="{\'hasChild\' : ctrl.hasChild, \'colapsed\' : !ctrl.item.expanded, \'expanded\' : ctrl.item.expanded, \'loading\' : ctrl.loading, \'selected\' : ctrl.isSelected($parent.ctrl, ctrl.item)}"></div>\n  <div class="checkbox ng-hide" ng-click="ctrl.checkboxClick(this, ctrl.item)" ng-class="{\'checked\' : ctrl.isChecked(ctrl.item), \'selected\' : ctrl.isSelected($parent.ctrl, ctrl.item)}" ng-show="$parent.ctrl.checkbox">\n    <div class="undetermined ng-hide" ng-show="ctrl.isUndetermined(ctrl.item)"></div>\n  </div>\n  <div class="icon-and-text" ng-class="{\'select-row\': $parent.ctrl.selectRow, \'selected\' : (!$parent.ctrl.selectRow && ctrl.isSelected($parent.ctrl, ctrl.item))}">\n    <div class="icon ng-hide" ng-class="ctrl.getClassIcon(ctrl, ctrl.item)" ng-dblclick="ctrl.itemDoubleClick($parent.ctrl, this, ctrl.item)" ng-show="$parent.ctrl.showIcon"></div>\n    <div class="text" ng-dblclick="ctrl.itemDoubleClick($parent.ctrl, this, ctrl.item)">\n      <span class="text-inner unselectable" ng-bind="ctrl.item.text" unselectable="on"></span>\n    </div>\n  </div\n</div>')}angular.module("uiDeniTreeview").run(e),e.$inject=["$templateCache"]}(),function(){angular.module("uiDeniTreeview").constant("uiDeniTreeviewEnum",{CHECKBOX_STATE:{CHECKED:1,UNCHECKED:2,UNDETERMINED:3}})}(),function(){angular.module("uiDeniTreeview").constant("uiDeniTreeviewConstant",{ROOT_ITEM:{id:-1,text:"root",expanded:!0,root:!0}})}(),function(){function e(){function e(e,t){return{getCheckedItems:function(){return t.getCheckedItems(e)},getSelectedItem:function(){return t.getSelectedItem(e)}}}var t=this;t.implementApi=function(t,i,n){i.each(function(){angular.element(this).init.prototype.api=e(t,n)})}}angular.module("uiDeniTreeview").service("uiDeniTreeviewApiService",e)}(),function(){function e(){var e=this;e.implementEvents=function(e){e.$on("onexpand",function(t,i){t.stopPropagation(),e.$emit("onexpanditem",i)}),e.$on("oncheck",function(t,i){t.stopPropagation(),e.$emit("oncheckitem",i)}),e.$on("onload",function(t,i,n){t.stopPropagation(),e.$emit("onloadchildren",i,n)}),e.$on("onselect",function(t,i){t.stopPropagation(),e.$emit("onselectitem",i)})}}angular.module("uiDeniTreeview").service("uiDeniTreeviewEventsService",e)}(),function(){function e(e,t){function i(e){e.children&&angular.forEach(e.children,function(t){t.state=e.state,i(t)})}var n=this;n.getCheckedItems=function(t,r){var c=[],l=r||t.ctrl.items;return angular.forEach(l,function(r){if("VD"===r.type)r.state===e.CHECKBOX_STATE.CHECKED&&c.push(r.id);else if(angular.isDefined(r.state)&&r.state!==e.CHECKBOX_STATE.UNCHECKED){var l=r.children;if(!r.expanded&&r.state===e.CHECKBOX_STATE.CHECKED){var o=angular.copy(r);t.$emit("onexpanditem",o),l=o.children,i(o)}if(l){var a=n.getCheckedItems(t,l);c=c.concat(a)}}}),c},n.getSelectedItem=function(e){return e.ctrl.selectedItem}}angular.module("uiDeniTreeview").service("uiDeniTreeviewService",e),e.$inject=["uiDeniTreeviewEnum","uiDeniTreeviewApiService"]}(),function(){function e(e){function t(e,i,n){e&&angular.forEach(e,function(e){e.hidden=!i,n&&e.expanded&&t(e.children,i,n)})}function i(t){a.isChecked(t)?t.state=e.CHECKBOX_STATE.UNCHECKED:t.state=e.CHECKBOX_STATE.CHECKED}function n(e){e.children&&angular.forEach(e.children,function(t){t.state=e.state,n(t)})}function r(t){if(t&&!t.root&&angular.isDefined(t.parent)){var i=c(t),n=l(i);if(n)t.parent.state=e.CHECKBOX_STATE.CHECKED;else{var a=o(i);a?t.parent.state=e.CHECKBOX_STATE.UNCHECKED:t.parent.state=e.CHECKBOX_STATE.UNDETERMINED}r(t.parent.ctrl)}}function c(e){if(angular.isDefined(e.parent))return e.parent.children}function l(e){for(var t=0;t<e.length;t++){var i=e[t];if(!a.isChecked(i))return!1}return!0}function o(e){for(var t=0;t<e.length;t++){var i=e[t];if(!a.isUnchecked(i))return!1}return!0}var a=this;a.getNgClassItem=function(e,t){var i=[t.theme];return e.selectRow&&(i.push("select-row"),t.isSelected(e,t.item)&&i.push("selected")),i},a.expandButtonClick=function(e,i){var n=!i.expanded;n?!function(){e.ctrl.loading=!0;var r=function(){i.children&&(i.expanded=n,t(i.children,!0,!0)),e.ctrl.loading=!1};e.$parent.ctrl.lazyLoad?angular.isDefined(i.children)?r():e.$emit("onload",i,function(e){i.children=e,r()}):r()}():(i.expanded=n,t(i.children,!1,!0))},a.getClassIcon=function(e,t){return t.isLeaf?"isleaf":t.expanded?"expanded":void 0},a.checkboxClick=function(e,t){i(t),n(t),r(e.ctrl),e.$emit("oncheck",t)},a.itemMousedown=function(e,t,i){var n=angular.element(event.target),r=function(){e.selectedItem=i,t.$emit("onselect",i)};e.selectRow?r():(n.is(".icon")||n.is(".text-inner")||n.is(".text"))&&r()},a.itemDoubleClick=function(e,t,i){a.expandButtonClick(t,i)},a.isSelected=function(e,t){return angular.equals(e.selectedItem,t)},a.isChecked=function(t){return t.state===e.CHECKBOX_STATE.CHECKED},a.isUnchecked=function(t){return t.state===e.CHECKBOX_STATE.UNCHECKED},a.isUndetermined=function(t){return t.state===e.CHECKBOX_STATE.UNDETERMINED}}angular.module("uiDeniTreeview").service("uiDeniTreeviewItemService",e),e.$inject=["uiDeniTreeviewEnum"]}(),function(){function e(e,t,i){this.rootItem=i.ROOT_ITEM}angular.module("uiDeniTreeview").controller("uiDeniTreeviewController",e),e.$inject=["$scope","uiDeniTreeviewService","uiDeniTreeviewConstant"]}(),function(){function e(e){this.getNgClassItem=e.getNgClassItem,this.expandButtonClick=e.expandButtonClick,this.checkboxClick=e.checkboxClick,this.itemMousedown=e.itemMousedown,this.itemDoubleClick=e.itemDoubleClick,this.isSelected=e.isSelected,this.isChecked=e.isChecked,this.isUndetermined=e.isUndetermined,this.getClassIcon=e.getClassIcon}angular.module("uiDeniTreeview").controller("uiDeniTreeviewItemController",e),e.$inject=["uiDeniTreeviewItemService"]}(),function(){function e(e,i,n,r,c){return{restrict:"E",scope:{},bindToController:{checkbox:"=?",items:"=",lazyLoad:"=?",selectRow:"=?",showIcon:"=?",showRoot:"=?",theme:"=?"},controller:"uiDeniTreeviewController",controllerAs:"ctrl",replace:!0,template:e.get("ui-deni-treeview.view.html"),link:function(e,l,o){e.ctrl.element=angular.element(l),t(e.ctrl,l,i),c.implementApi(e,e.ctrl.element,n),r.implementEvents(e)}}}function t(e,t,i){e.theme=e.theme||"classic",t.addClass(e.theme),e.showIcon=e.showIcon||!0,e.showRoot=e.showRoot||!1,e.selectRow=e.selectRow||!1,e.lazyLoad=e.lazyLoad||!1,e.marginItems=e.marginItems||30,angular.isArray(e.items)?e.rootItem.children=e.items:e.rootItem=angular.merge(i.ROOT_ITEM,e.items)}angular.module("uiDeniTreeview").directive("uiDeniTreeview",e),e.$inject=["$templateCache","uiDeniTreeviewConstant","uiDeniTreeviewService","uiDeniTreeviewEventsService","uiDeniTreeviewApiService"]}(),function(){function e(e){return{restrict:"E",scope:{},bindToController:{item:"=",level:"=",parent:"=?",theme:"@?"},controller:"uiDeniTreeviewItemController",controllerAs:"ctrl",replace:!0,template:e.get("ui-deni-treeview-item.view.html"),link:function(e,i,n){t(e,i),e.$watch("ctrl.item.expanded",function(t,i){t!==i&&e.$emit("onexpand",e.ctrl.item)})}}}function t(e,t){e.ctrl.item.ctrl=e.ctrl,e.ctrl.item.expanded=e.ctrl.item.expanded||!1,e.ctrl.hasChild=!(!e.ctrl.item.children&&!e.$parent.ctrl.lazyLoad),e.ctrl.root=e.ctrl.item.root||!1;var i=5+e.ctrl.level*e.$parent.ctrl.marginItems;e.$parent.ctrl.showRoot||(i-=e.$parent.ctrl.marginItems),t.css("padding-left",i+"px")}angular.module("uiDeniTreeview").directive("uiDeniTreeviewItem",e),e.$inject=["$templateCache"]}();